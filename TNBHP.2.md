# 顶部导航栏和首页(Top Navigation Bar and Home Page)
- 状态：Draft
- 作者：Zhang Ji zhangji@parsec.com.cn

## 1. 顶部导航栏
### 1.1. 概述
1. 已登录用户的所有界面顶部都应该显示[TNBHP.2](TNBHP.2.md)定义的顶部导航栏。
2. 顶部导航栏左侧应该显示当前团队名称，点击团队名称应该显示下拉菜单，用于切换团队。
3. 顶部导航栏右侧应该显示当前用户头像，点击用户头像应该显示下拉菜单。
4. 导航栏左侧的下拉菜单应该显示：a)当前用户所属的团队，点击可切换团队；b)「创建新团队」超链接。
5. 导航栏右侧的下拉菜单应该显示：a)当前用户的姓名和邮箱；b)「个人设置」超链接；c)「团队设置」超链接（如果当前用户不是当前团队的管理员则不显示）；d)「退出登录」按钮。

### 1.2. 切换团队
1. 切换团队后，应该立即跳转到当前团队的首页。
2. 团队首页应该是按照[PP.3](PP.3.md)定义实现的团队页面中，第一个tab的页面。

### 1.3. 「创建新团队」页面
1. 「创建新团队」页面应该是form表单，输入项包括：a)团队名称（单行文本）；b)「创建团队」按钮。
2. 团队名称在全站范围内允许重复。

## 1.4. 「个人设置」页面
1. 「个人设置」页面应该是form表单，输入项包括：a)头像；b)姓名；c)邮箱；d)「保存」按钮。
2. 应显示「修改密码」超链接。
3. 头像图片应该本地存储，即不使用第三方服务托管。

## 1.5. 「修改密码」页面
1. 「修改密码」页面应该是form表单，输入项包括：a)原密码；b)新密码；c)「确定」按钮。

## 1.6. 「团队设置」页面
1. 应该显示团队名称
2. 应该显示「修改团队名称」按钮。
   * 点击「修改团队名称」按钮后，团队名称应该变成单行输入框，「修改团队名称」按钮应该变成「保存」和「取消」按钮。
   * 点击「保存」或「取消」按钮后，应该重新显示团队名称和「修改团队名称」按钮。
3. 应该显示团队成员列表，每个团队成员的字段包括：a)头像；b)姓名；c)角色；d)设置按钮（如果当前用户不是当前团队的管理员则不显示）。
   * 角色包括：管理员、成员。
   * 一个团队可以有1个或多个管理员，每个管理员都有相同的权限。
   * 点击设置按钮后应该显示下拉菜单，包括：a)「设为管理员」按钮（如果改成员是管理员则不显示）；b)「设为成员」按钮（如果该成员不是管理员，或该成员是唯一的管理员则不显示）；c)「从团队移除」按钮。
4. 应该显示「邀请新成员」超链接。
5. 应该显示“删除团队”文字，和「了解风险，删除当前团队」按钮。
   * 点击按钮应该弹出模态框。
   * 模态框应该显示如下文字：“删除团队：{团队名称}”。
   * 模态框应该显示如下文字：“重要提示：删除团队后，所有内容都会被立即删除，不可恢复。”。
   * 模态框应该包含form表单，输入项包括：a)当前团队名称；b)当前用户的登录密码；c)「确认删除」和「取消」按钮。

## 1.7. 「邀请新成员」页面
1. 应该显示如下文字：“通过公开链接，快速邀请”。
2. 应该显示如下文字：“将下面的公共邀请链接发送给需要邀请的人”。
3. 应该显示一条独一无二的邀请链接。
4. 应该显示「复制」按钮，点击后可以复制邀请链接。
5. 应该显示如下文字：“注意：任何看到邀请链接的人，都可以申请加入团队。如果你想让邀请链接失效，请 _重新生成邀请链接_ ”。
6. "重新生成邀请链接"应是一个按钮，点击后应提示：“此操作将导致当前邀请链接失效，确定要重新生成邀请链接吗？ _确认_ _取消_”。
   * 点击确认按钮后，邀请链接应被重置。

## 1.8.1 「接受邀请新成员」页面
1. 如果用户未登录，则应该跳转到登录页面。
2. 应该显示如下文字：“是否同意加入「{团队名称}」?”。
3. 应该显示「确认」和「取消」按钮。
   * 点击确认按钮后，当前用户成为该团队普通成员，将当前团队切换为该团队，然后跳转到首页。
   * 点击取消按钮后，立即跳转到首页。

## 1.7. 退出登录
1. 退出登录后，应该立即跳转到登录页。

## 2. 首页
### 2.1. 概述
1. 首页应该显示当前用户在当前团队中有访问权限的项目列表。
2. 每个项目卡片包括：a)图标；b)项目名称。
3. 项目图标可能为树苗、小树、大树，反映项目规模。
4. 首页右上方应该显示「新建项目」超链接。

### 2.2. 「新建项目」页面
1. 「新建项目」页面应该是form表单，输入项包括：a)项目名称（单行文本）；b)描述（多行文本）；c)权限（单选：私有、公共）；d)「创建新项目」按钮。
   * 项目名称：在团队范围内项目名称不允许重复。
   * 私有权限：仅项目成员或团队管理员可访问。
   * 公共权限：任何人都可访问。
